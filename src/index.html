<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>gb-ES6</title>
  </head>
  <style>
    body {
      margin: 0;
    }
    #screen{
      background-color: #e2ffe3;
    }
  </style>

  <body>
    <canvas id="screen" width="160" height="144"></canvas>
  </body>

  <script>
    const CPU = require('../lib/cpu.js').default;
    const config = require('../lib/config.js').default;
    const app = require('electron').remote;
    const Menu = app.Menu;
    const dialog = app.dialog;

    const template = [{
      label: 'File',
      submenu: [{
          label: 'Open Game...',
          accelerator: 'CmdOrCtrl+O',
          role: 'open',
          click(){
            dialog.showOpenDialog(function(fileNames) {
              if(fileNames !== undefined){
                new CPU(fileNames[0], ctx).start(0x100);
              }
            });
          }
        },{
          label: 'Close',
          accelerator: 'CmdOrCtrl+Q',
          role: 'close'
        }]
    }];

    const menu = Menu.buildFromTemplate(template);
    Menu.setApplicationMenu(menu);

    //config.DEBUG = true;

    const canvas = document.getElementById('screen');
    const ctx = canvas.getContext('2d');

  </script>
</html>
